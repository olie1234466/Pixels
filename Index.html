<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>COLOR DASH</title>
<style>
body{
  margin:0;
  background:#000;
  color:white;
  font-family:monospace;
  text-align:center;
}
canvas{
  display:block;
  margin:auto;
  background:linear-gradient(180deg,#ff00cc,#3333ff);
}
#overlay{
  position:absolute;
  top:0;left:0;right:0;bottom:0;
  display:flex;
  align-items:center;
  justify-content:center;
  flex-direction:column;
  background:rgba(0,0,0,0.6);
}
button{
  font-size:20px;
  padding:12px 20px;
  margin-top:10px;
}
</style>
</head>
<body>

<div id="overlay">
  <h1 style="color:#00ffff">COLOR DASH</h1>
  <p>ðŸŽµ Music ON</p>
  <p>Tap or Click to Jump</p>
  <p>Dodge the blocks</p>
  <button onclick="startGame()">START</button>
</div>

<canvas id="game" width="360" height="200"></canvas>

<audio id="music" loop>
  <source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_5c0c7e4a0c.mp3?filename=dreams-110734.mp3">
</audio>

<script>
const canvas=document.getElementById("game");
const ctx=canvas.getContext("2d");
const overlay=document.getElementById("overlay");
const music=document.getElementById("music");

let playing=false;
let score=0;
let speed=3;

const player={
  x:40,y:140,w:20,h:20,vy:0
};

let blocks=[];

function startGame(){
  overlay.style.display="none";
  music.volume=0.5;
  music.play();
  reset();
  playing=true;
}

function reset(){
  score=0;
  speed=3;
  player.y=140;
  player.vy=0;
  blocks=[];
}

function jump(){
  if(player.y>=140) player.vy=-8;
}

document.addEventListener("click",jump);
document.addEventListener("touchstart",jump);

function spawnBlock(){
  blocks.push({
    x:360,
    y:140,
    w:20,
    h:20,
    color:`hsl(${Math.random()*360},100%,60%)`
  });
}

function update(){
  if(!playing) return;

  player.vy+=0.5;
  player.y+=player.vy;
  if(player.y>140){player.y=140;player.vy=0;}

  if(Math.random()<0.02) spawnBlock();

  blocks.forEach(b=>{
    b.x-=speed;
    if(
      player.x<b.x+b.w &&
      player.x+player.w>b.x &&
      player.y<b.y+b.h &&
      player.y+player.h>b.y
    ){
      gameOver();
    }
    if(!b.passed && b.x+b.w<player.x){
      b.passed=true;
      score+=10;
      speed+=0.02;
    }
  });

  blocks=blocks.filter(b=>b.x>-30);
}

function gameOver(){
  playing=false;
  music.pause();
  overlay.innerHTML=`
    <h1 style="color:#ff4444">GAME OVER</h1>
    <p>Score: ${score}</p>
    <button onclick="location.reload()">RESTART</button>
  `;
  overlay.style.display="flex";
}

function draw(){
  ctx.clearRect(0,0,360,200);

  ctx.fillStyle="#00ffff";
  ctx.fillRect(player.x,player.y,player.w,player.h);

  blocks.forEach(b=>{
    ctx.fillStyle=b.color;
    ctx.fillRect(b.x,b.y,b.w,b.h);
  });

  ctx.fillStyle="white";
  ctx.fillText("Score: "+score,10,15);
}

function loop(){
  update();
  draw();
  requestAnimationFrame(loop);
}
loop();
</script>
</body>
</html>
